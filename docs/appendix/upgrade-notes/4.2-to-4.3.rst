From 4.2 to 4.3
===============

.. contents:: Contents
   :local:
   :depth: 1
   
Deprecation of rel="toggle" and rel="popup"
-------------------------------------------

If you are using ``rel="toggle"`` or ``rel="popup"`` for showing some hidden content you will need to update your code.
The correct javascript will automatically be loaded if you draw content using ``output/url`` (directly or indirectly) and pass the class ``elgg-popup`` or ``elgg-toggle``.
If you need popup/toggle features on your own elements, you will need to set the correct class and require the correct javascript (``elgg/popup`` or ``elgg/toggle``). 

PAM handlers
------------

PAM handlers, which handle authentication, have been reworked. The registration now uses a DI service instead of a static variable in a class.

Because of the rework PAM handlers can now also be invokable classes and Elgg core (including the Webservices plugin) is using this. 
If as a developer you unregistered certain PAM handlers please check the new code.

Deprecated APIs
---------------

Lib functions
~~~~~~~~~~~~~

* ``add_translation()`` use ``elgg()->translator->addTranslation()``
* ``current_page_url()`` use ``elgg_get_current_url()``
* ``elgg_authenticate()`` use ``elgg_pam_authenticate()``
* ``elgg_get_loaded_external_files()`` use ``elgg_get_loaded_external_resources()``
* ``filter_tags()`` use ``elgg_sanitize_input()``
* ``generate_invite_code()`` use ``elgg_generate_invite_code()``
* ``get_dir_size()``
* ``is_email_address()`` use ``elgg_is_valid_email()``
* ``parse_urls()`` use ``elgg_parse_urls()``
* ``register_pam_handler()`` use ``elgg_register_pam_handler()``
* ``string_to_tag_array()`` use ``elgg_string_to_array()``
* ``unregister_pam_handler()`` use ``elgg_unregister_pam_handler()``

Plugin hooks
~~~~~~~~~~~~

* ``'fail', 'auth'``
* ``'validate', 'input'`` use the ``'sanitize', 'input'`` hook 

Classes
~~~~~~~

* ``\ElggPAM`` use ``elgg_pam_authenticate()``
